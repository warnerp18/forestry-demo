# R A D I U S
The purpose of this library is to enable all developers to use the design guidelines set by the Funding Circle design team. With that in mind, we’ve built [this documentation][documentation] so that it’s easy for anyone to use a collection of variables, mixins, functions and utility classes.

## Requirements
* nodejs
* npm

## Setting up for development
1. Make sure you have `node` and `npm` installed
1. Install all development dependencies
   ```
   npm install
   ```
1. Install `gulp-cli` and `http-server` globally
   ```
   npm install -g gulp-cli http-server
   ```
1. Run one of:
   - `gulp build:m2dm` to build everything once
   - `gulp watch` to rebuild assets on file change
   - `npm run start:doc PORT_NUMBER` to automatically run documentation on port you have specified in `PORT_NUMBER`. (note the `PORT_NUMBER` is required)
1. Start a webserver (e.g. `http-server`)
   ```
   http-server -c-1 dist/m2dm/documentation/
   ```

   if you want to view `current` docs (reminder: `current` is being deprecated) then instead do
   ```
   http-server -c-1 dist/current/styleguide/

   ```
1. Go to http://localhost:8080/M2DM (or /current) to see the documentation

## How to use
You can easily import this repository into your project using `npm`. Just run
the following commands:
1. Add Funding Circle's Artifactory registry:
   ```
   npm config set registry https://fundingcircle.jfrog.io/fundingcircle/api/npm/npm/
   ```
1. Then configure `npm` to use your Artifactory credentials:
   ```
   curl -u "$ARTIFACTORY_USER:$ARTIFACTORY_PASSWORD" https://fundingcircle.jfrog.io/fundingcircle/api/npm/auth >> ~/.npmrc
   ```

After that, run `npm install radius` and you are all set!

## Build
Source files are located in `src` and are built into the build directory. This is `dist` by default.

### Overriding the build path
You may want to override the build path, for example to develop styles on one of the other Funding Circle projects. Override the build path using the environment variable `BUILD_PATH`.
e.g.
```shell
$ BUILD_PATH=/path/to/fca-frontend gulp build
```

## Sandbox
When you build new components or features, test them in the `sandbox` directory.

## Deploying to UAT
Currently there's no way to deploy a radius branch to UAT on its own. Instead, you can create a radius branch with a `prerelease-` prefix and a prerelease tag will get automatically created. You can then use this tag in your package.json file.
### Example:
1. Create a branch with prerelease prefix: `prerelease-my-branch`.
2. Push the prerelease branch to github. A prerelease tag will get created: `prerelease-my-branch-tag`.
3. Use the tag in your package.json file:
```
"devDependencies": {
  "radius" : "git@github.com:FundingCircle/radius.git#prerelease-my-branch-tag"
}
```
Prerelease tags are only meant to be used for demo purposes and NEVER as production dependencies.

## Creating a new component
There is a script to assist you in creating the boilerplate for a new component. To use it, run this command, then follow the instructions in the terminal:

`node scripts/component-generator/create.js`

## Releasing a new version
1. Create a new branch
1. Bump the version number in `package.json`
1. Commit and push your changes
1. After code review, merge to `master`
1. Add notes about the new release on GitHub

## Compatibility
The library provides fallback functionality for different browsers by using the FT's polyfill service (polyfill.io).

`Note`: Some of the features that are supported by the polyfill service are not included by default; in such case the particular feature need to be explicitly mentioned in the source attribute of the polyfill script.

## Licence
This software is licensed under 3-clause BSD licence. Please see the `LICENCE.md` for details.



<!-- References -->
[documentation]: http://fundingcircle.github.io/radius/

## Changelog Guide

### Writing a log entry
This file must be updated whenever the version number changes. More recent entries should be added above older ones. At the very bottom of this page is an example template which shows the format that entries should adhere to. The format is based on [Keep a Changelog](http://keepachangelog.com/en/1.0.0/). Each entry should include the version number, the date, and a list of signficant changes that are organised into sections. The main sections that an entry may contain are as follows:
- *Added*: New features that were added. e.g. a new component.
- *Breaking Changes*: Breaking changes to the code base. This is probably the most important section and **MUST** be included if changes introduce code that breaks existing behaviour.
- *Fixed*: Any bug fixes.
- *Removed*: items that were removed or deprecated.
- *Migration Guide*: For breaking changes, a guide how to adapt code using the Radius library to take account of breaking changes.

Additionally, meta information such as the developer(s) identity and a link to the PR should also be added.

It is not necessary for all sections to be included, and it is possible for one change to appear in more than one section. e.g. A bug fix may also be a breaking change.
###  Semantic Versioning
With ever new release, it is **VERY** important that the semver in package.json be updated correctly.
This project adheres to [Semantic Versioning](http://semver.org/spec/v2.0.0.html), but with some **VERY IMPORTANT** caveats:
A major release means a breaking change, not a bunch of exciting new features. For us, the tiniest bug fix could quite easily be a breaking change:
For example, if the HTML of a component is changed in any way, it is likely to be a breaking change.
On the other hand, Making even large scale changes in CSS declarations is unlikely to be a breaking change since, as long as selectors remain unchanged, the code that uses the component should continue to work (albeit differently).

General guidance on versioning

- *Patch* (3rd number from left): If your changes do **NOT** require users of Radius to make changes to **THEIR** code.
- *Minor* (2nd number from left): If your changes introduce a new feature, e.g. a new component, but do **NOT** require users of Radius to make changes to **THEIR** code.
- *Major* (1st number from left): If your changes **DO** require users of Radius to make changes to **THEIR** code.

If making breaking changes, remember to provide a migration guide which explains to users of the library how to make the necessary changes to their code.

See below for an example entry. Changelog files are supposed to be for humans, not for machines, so making entries clear and easy to read is more important than adhering to any strict formatting rules.
###  Guidance for users of the Radius library (e.g. developers on UK, CE, and US websites)
Read latest changelog entries whenever you update Radius. Pay particular attention when the major version number changes because that indicates that the update contains breaking changes and you **MUST** make changes to your code. Follow the migration section of the log entry carefully. If in any doubt, consult with Radius maintainers.

## Changelog Template

Use the following as template for creating log files

## [7.0.0] - 2017-07-23

Dev:  [Richard Hunter](https://github.com/richardinho)

PR: [#1314](https://github.com/FundingCircle/radius/pull/1314)

### Added
- Foo component richard.hunter@fundingcircle.com
- Example Page using Foo component

### Breaking Changes
- classname ```.foo-bar``` to ```.foo__bar```

###  Fixed
- 1 pixel gap below footer
- padding issue on hero h1 text

### Removed
- example html from documentation for Bar component
- Old layout component no longer used, replaced with new CSS Grids

### Migration Guide

Made changes to bar component.

##### How to change class name on bar component
On every instance of the bar component, change the classname on the component's root element from ```foo-bar```  to ```foo__bar```
```html
  <div class="bar foo__bar"><!-- rest of component --></div>
```
