(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define('radius/accordion', ['exports', './utils'], factory);
  } else if (typeof exports !== "undefined") {
    factory(exports, require('./utils'));
  } else {
    var mod = {
      exports: {}
    };
    factory(mod.exports, global.utils);
    global.radiusAccordion = mod.exports;
  }
})(this, function (exports, _utils) {
  'use strict';

  Object.defineProperty(exports, "__esModule", {
    value: true
  });
  exports.default = accordionComponent;

  var _utils2 = _interopRequireDefault(_utils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
      default: obj
    };
  }

  var ACTIVE_CLASS = 'is-active';
  var SELECTOR = '.js-accordion-item';

  function accordionComponent() {
    var accordionItems = document.querySelectorAll(SELECTOR);
    var titles = document.querySelectorAll('.js-accordion-item__title');

    _utils2['default'].forEach(accordionItems, removeActiveClass);
    _utils2['default'].forEach(titles, createAccordion);

    function removeActiveClass(element) {
      _utils2['default'].removeClass(element, ACTIVE_CLASS);
    }

    function createAccordion(element) {
      _utils2['default'].addEventListener(element, 'click', onAccordionItemClick);
    }

    function onAccordionItemClick(event) {
      var element = event.target;
      var accordionItem = element.closest(SELECTOR);
      var activeBeforeClick = _utils2['default'].hasClass(accordionItem, ACTIVE_CLASS);

      _utils2['default'].forEach(accordionItems, function (el) {
        _utils2['default'].removeClass(el, ACTIVE_CLASS);
      });

      if (!activeBeforeClick) {
        _utils2['default'].addClass(accordionItem, ACTIVE_CLASS);
      }
    }
  }
});