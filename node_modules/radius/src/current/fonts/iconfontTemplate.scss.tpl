/**
 * section: current/icons
 * title: Icons
 * layout: icons
 *
 * description: Add the class to load the icon.
 *
 * icons: <% _.each(glyphs, function(glyph) { %>
 *   - <%= className %>-<%= glyph.name %><% }); %>
 */


@if (get-const(config, load-icons) != false) {
  @font-face {
    font-family: "<%= fontName %>";
    src: url(env-path-helper('#{get-const(config, font-path)}<%= fontName %>.eot'));
    src: url(env-path-helper('#{get-const(config, font-path)}<%= fontName %>.eot?#iefix')) format('eot'),
      url(env-path-helper('#{get-const(config, font-path)}<%= fontName %>.woff')) format('woff'),
      url(env-path-helper('#{get-const(config, font-path)}<%= fontName %>.ttf')) format('truetype'),
      url(env-path-helper('#{get-const(config, font-path)}<%= fontName %>.svg#<%= fontName %>')) format('svg');
    font-weight: normal;
    font-style: normal;
  }


  // We need the important rule so that we don't override the icon fonts
  // scss-lint:disable ImportantRule
  .fci-icon:before {
    font-family: "<%= fontName %>" !important;
    font-style: normal !important;
    font-weight: normal !important;
    font-variant: normal !important;
    text-transform: none !important;
    speak: none;
    line-height: inherit;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  // scss-lint:enable ImportantRule

  [class^="<%= className %>-"]:before,
  [class*=" <%= className %>-"]:before {
    @extend .fci-icon !optional;
  }

  <% _.each(glyphs, function(glyph) { %>.<%= className %>-<%= glyph.name %>:before { content: "\<%= glyph.unicode.toString(16).toUpperCase() %>"; }
  <% }); %>
}


/* ---------------------------------------------------------------------- *\
  SOURCE SANS
\* ---------------------------------------------------------------------- */

$source-sans: (
  ( folder: regular, file: Regular, weight: 400, style: normal, svgID: regular),
  ( folder: light, file: Light, weight: 300, style: normal, svgID: light),
  ( folder: light-italic, file: LightIt, weight: 300, style: italic, svgID: light_italic),
  ( folder: italic, file: It, weight: 400, style: italic, svgID: italic),
  ( folder: semi-bold, file: Semibold, weight: 600, style: normal, svgID: semibold),
  ( folder: semi-bold-italic, file: SemiboldIt, weight: 600, style: italic, svgID: SBdIt)
);

@if (get-const(config, load-fonts) != false) {
  @each $item in $source-sans {
    @font-face {
      font-family: get-const(config, font-family);
      font-weight: map-get($item, weight);
      font-style: map-get($item, style);

      src: url(env-path-helper('#{get-const(config, font-path)}fonts/#{map-get($item, folder)}/SourceSansPro-#{map-get($item, file)}.eot'));
      src: url(env-path-helper('#{get-const(config, font-path)}fonts/#{map-get($item, folder)}/SourceSansPro-#{map-get($item, file)}.eot?#iefix')) format('embedded-opentype'),
           url(env-path-helper('#{get-const(config, font-path)}fonts/#{map-get($item, folder)}/SourceSansPro-#{map-get($item, file)}.woff2')) format('woff2'),
           url(env-path-helper('#{get-const(config, font-path)}fonts/#{map-get($item, folder)}/SourceSansPro-#{map-get($item, file)}.woff')) format('woff'),
           url(env-path-helper('#{get-const(config, font-path)}fonts/#{map-get($item, folder)}/SourceSansPro-#{map-get($item, file)}.ttf')) format('truetype'),
           url(env-path-helper('#{get-const(config, font-path)}fonts/#{map-get($item, folder)}/SourceSansPro-#{map-get($item, file)}.svg#source_sans_pro#{map-get($item, svgID)}')) format('svg');
    }
  }
}
