/**
 * section: current/components/form/error-message
 * title: Error messages
 *
 * activateComponent: radius-component-error-message
 *
 * description: |
 *   Use the error-message component to display validation errors.
 *   The error message will be visible when the field is invalid and is not focused.
 *   If you'd like to show the error message only when the field has been 'touched'
 *   at least once, use the enable-required-fields JS module and mark required fields
 *   with the data-required attribute.
 *
 * markup: components/form/error-message/error-message
 */


$_error-message: (
  arrow-height: 10px
);


@mixin radius-component-error-message {
  .error-message {
    @include font(medium);

    position: relative;
    display: none;

    width: 100%;
    padding: size(1);
    margin-top: size(1);

    color: get-color(white);

    background: get-color(red);


    &:before {
      @include triangle(up, get-color(red), (get-var($_error-message, arrow-height) * 2) get-var($_error-message, arrow-height));

      position: absolute;
      top: negative(get-var($_error-message, arrow-height));
      left: size(2);

      content: '';
    }


    &.is-visible {
      display: block;
    }
  }


  .is-error ~ .error-message,
  :not(:focus):invalid ~ .error-message {
    display: block;
  }


  :not([data-required]):valid ~ .error-message {
    display: none;
  }
}
