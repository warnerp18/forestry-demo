/**
 * section: current/components/tabs
 * title: Tabs component
 *
 * activateComponent: radius-component-tabs
 *
 * description: |
 *   On mobile, or when the JavaScript is not present, the tab component 'unrolls' and is presented as a list of sections, rather than tabs.
 *
 * markup: components/tabs/tabs
 */


$_tabs: (
  collapsed-breakpoint: mobile-large,
  tablist-border-size: 5px,
  height: 88px
);


@function tabs($key) {
  @return map-get($_tabs, $key);
}


@mixin radius-component-tabs {
  .tablist {
    @include font(large);
    @include list-unstyled;

    display: none;
    text-align: center;


    .has-js & {
      @include breakpoint(from tabs(collapsed-breakpoint)) {
        display: table;
      }
    }
  }


  .tablist li {
    display: table-cell;
    width: 1%;
    vertical-align: middle;
  }


  .tablist__item {
    // disable linter because display: block is a fallback for when flex is not supported
    // scss-lint:disable DuplicateProperty
    display: block;
    display: flex;
    // scss-lint:enable DuplicateProperty
    align-items: center;
    justify-content: center;
    height: tabs(height);

    padding-right: size(2);
    padding-left: size(2);
    border-bottom: tabs(tablist-border-size) solid get-color(blue, lighter);


    &:hover,
    &:focus {
      text-decoration: none;

      background: transparentize(get-color(blue, lighter), .5);
      outline: 0;
    }


    &.is-selected {
      color: get-color(grey-cool, darker);
      border-bottom-color: get-color(blue, base);
    }
  }


  .tablist__item.tablist__item--transparent {
    background: transparent;
  }


  .tabpanel {
    padding: size(2 1.5);
    border-bottom: 1px solid get-color(grey-cool, light);


    .has-js & {
      @include breakpoint(from tabs(collapsed-breakpoint)) {
        background: get-color(white);
        border-bottom: 0;
      }
    }
  }


  .tabs.has-js .is-hidden {
    @include breakpoint(from tabs(collapsed-breakpoint)) {
      display: none;
    }
  }


  .tabpanel__header {
    @include font(large);

    text-align: center;


    .has-js & {
      @include breakpoint(from tabs(collapsed-breakpoint)) {
        display: none;
      }
    }
  }
}
