/**
 * section: current/typography/font
 * title: Fonts
 *
 * description: |
 *   Funding Circle uses a font scaling method called the ditonic golden ratio.<br>
 *   In order to make sure you are using the correct font size, you can send a note (parameter) to a mixin called `font()`
 *
 *   The `font()` mixin also will automatically adjust the `line-height` to the correct value (the `line-height` is the first multiple of the get-const(config, baseline)).
 *
 *   If you want to disable the `line-height`, set the 2nd parameter to `false`.
 *
 *   Options for font size (t-shirt sizing):
 *   `x-small, small, medium, large, x-large, 2x-large, 3x-large, 4x-large, 5x-large`
 *
 *   E.g. of usage:
 *   ```
 *   .example-element {
 *     @include font(x-large, [$line-height: true/false]);
 *   }
 *   ```
 *
 * modifiers:
 *   font-size-x-small: '@include font(x-small);'
 *   font-size-small: '@include font(small);'
 *   font-size-medium: '@include font(medium);'
 *   font-size-large: '@include font(large);'
 *   font-size-x-large: '@include font(x-large);'
 *   font-size-2x-large: '@include font(2x-large);'
 *   font-size-3x-large: '@include font(3x-large);'
 *   font-size-4x-large: '@include font(4x-large);'
 *   font-size-5x-large: '@include font(5x-large);'
 *
 * markup: typography/mixins/font
 */

$cached-font-map: font-size-map();

@mixin font($note, $line-height: true) {

  // backwards compatibility for numerical font size (-2 is the smallest and 6 is the largest font with 0 being the default font)
  @if str-length(inspect($note)) <= 2 {
    // @debug is cleaner and less noisy than @warn so it's suited for this
    // scss-lint:disable DebugStatement
    @warn 'You are using a deprecated form of the font mixin.';
    // scss-lint:enable DebugStatement
    // map the old font declaration to the new one (get the first element - key - from the nth element of the map from the $note + 2 position, where +2 is the offset from the old declaration)
    $note: first(nth($cached-font-map, $note + 3));
  }

  font-size: size(first(map-get($cached-font-map, $note)) * 1px);

  // backwards compatibility for line height
  @if type-of($line-height) == number {
    line-height: $line-height;
  }

  @if $line-height and type-of($line-height) != number {
    line-height: size(last(map-get($cached-font-map, $note)) * 1px);
  }
}
