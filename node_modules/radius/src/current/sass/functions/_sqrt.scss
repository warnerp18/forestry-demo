/**
 * section: current/functions/sqrt
 * title: Square root of a number
 *
 * description: |
 *   Returns the square root of a number.
 *
 *   ```
 *   sqrt($val)
 *   // sqrt(30) -> 5.477
 *   // sqrt(25) -> 5
 *   ```
 */

// capitals for constants are not conforming with linter, but are nice for
// readability
// scss-lint:disable NameFormat
@function sqrt($val) {
  // Set the maximum number of "guesses"
  $MAX_NO_OF_STEPS: 1000;

  // Set the maximum deviation from the real value
  $MAX_DEVIATION: .0005;

  // start from a rough value
  $x: $val / 2;

  // the default deviation (greater than the official deviation)
  // this is the starting deviation - will be updated with every iteration
  $deviation: $MAX_DEVIATION + 1;



  // Square root calculation using the Babylonian method
  // Math formula: x(n) = (1/2) * (x(n-1) + ($val / x(n-1)))

  // iteration counter (we need to use while)
  $i: 1;

  // run this until max number of steps or deviation is met
  @if $val > 0 {
    @while $i <= $MAX_NO_OF_STEPS or $deviation >= $MAX_DEVIATION {
      $i: $i + 1;
      $deviation: abs($val - $x * $x);
      $x: .5 * ($x + ($val / $x));
    }
  } @else {
    @error 'Please enter a positive number';
  }

  @return $x;
}
// scss-lint:enable NameFormat
