import $ from 'jquery';
import navigationToggle from '../navigationToggle';

describe('Mobile navigation', () => {
  let $button;
  let $navigation;

  beforeEach(() => {
    jasmine.getFixtures().fixturesPath = 'base/src/current/styleguide/js/tests/fixtures';
    jasmine.getFixtures().load('navigationToggle.html');

    navigationToggle('has-js', 'is-active', '[data-js-sg-navigation-button]', '[data-js-sg-navigation]');

    $button = $('[data-js-sg-navigation-button]');
    $navigation = $('[data-js-sg-navigation]');
  });

  it('adds the has-js class on the button', () => {
    expect($button).toHaveClass('has-js');
  });

  it('adds the has-js class on the navigation', () => {
    expect($navigation).toHaveClass('has-js');
  });

  describe('when clicking the button', () => {
    describe('if the button does not have the is-active class', () => {
      it('adds the class on the button', () => {
        $button.trigger('click');

        expect($button).toHaveClass('is-active');
      });

      it('adds the class on the navigation', () => {
        $button.trigger('click');

        expect($navigation).toHaveClass('is-active');
      });
    });

    describe('if the button has the is-active class', () => {
      it('removes the class on the button', () => {
        $button.addClass('is-active');
        $button.trigger('click');

        expect($button).not.toHaveClass('is-active');
      });

      it('removes the class on the navigation', () => {
        $navigation.addClass('is-active');
        $button.trigger('click');

        expect($navigation).not.toHaveClass('is-active');
      });
    });
  });
});
