/**
 * section: M2DM/components/process-diagram/loud-process-diagram
 * title: Loud process diagram
 *
 * activateComponent: radius-component-loud-process-diagram
 *
 * abstractLink: 0ef69164-c5c8-491b-8d3a-f470cae0cb72
 *
 * description: |
 *   It does not highlight individual, disconnected benefits like a feature list but rather helps describe the user's journey and show the process as a whole.
 *
 * markup: components/process-diagram/scss/loud-process-diagram/example
 */

@mixin radius-component-loud-process-diagram {
  $brand-color: get-color(purple, contrast);
  $inactive-color: get-color(grey, 2x-light);
  $background-color: get-color(white);
  $default-spacing: 2rem;
  $vertical-spacing: 3rem;
  $line-thickness: 2px;
  $circle-size: 1.5rem;
  $circle-alignment-offset: $circle-size / -2;
  $gradient: linear-gradient(to bottom, $brand-color 50%, $inactive-color 50%);


  .loud-process-diagram {
    padding: 0 1rem;

    list-style-type: none;
    background-color: $background-color;

    counter-reset: process-diagram;
  }


  .loud-process-diagram__item {
    position: relative;

    background: $gradient fixed;
    background-color: $brand-color;
    border-radius: $default-spacing;


    @include breakpoint(to tablet-large) {
      background-image: none;
    }
  }


  .loud-process-diagram__content {
    min-height: 4rem;

    background-clip: padding-box;
    background-color: $background-color;
    border: 0 solid transparent;
  }


  .loud-process-diagram__item:nth-child(odd) {
    margin-right: 1rem;
  }


  .loud-process-diagram__item:nth-child(even) {
    margin-left: 1rem;
  }


  .loud-process-diagram__item:nth-child(odd) .loud-process-diagram__content {
    padding-left: $default-spacing;
    margin-right: -$default-spacing;

    border-left-width: $line-thickness;
  }


  .loud-process-diagram__item:nth-child(even) .loud-process-diagram__content {
    padding-right: $default-spacing;
    margin-left: -$default-spacing;

    border-right-width: $line-thickness;
  }


  .loud-process-diagram__item:not(:last-child) .loud-process-diagram__content {
    padding-bottom: $vertical-spacing;

    border-bottom-width: $line-thickness;
    border-bottom-right-radius: $default-spacing;
    border-bottom-left-radius: $default-spacing;
  }


  .loud-process-diagram__item:not(:first-child) .loud-process-diagram__content {
    padding-top: $vertical-spacing;
    margin-top: -$line-thickness;

    border-top-width: $line-thickness;
    border-top-right-radius: $default-spacing;
    border-top-left-radius: $default-spacing;
  }


  .loud-process-diagram__item:first-child {
    border-top-left-radius: 0;
  }


  .loud-process-diagram__item:last-child::before {
    position: absolute;
    top: $vertical-spacing + ($circle-size / 2);
    bottom: 0;

    width: $line-thickness + 1;

    background-color: $background-color;

    content: "";
  }


  .loud-process-diagram__item:nth-child(odd):last-child::before {
    left: 0;
  }


  .loud-process-diagram__item:nth-child(even):last-child::before {
    right: 0;
  }


  .loud-process-diagram__content::after,
  .loud-process-diagram__content::before {
    @include font(small, false);

    position: absolute;
    top: $vertical-spacing;

    display: block;
    width: $circle-size;
    height: $circle-size;
    margin: 0 ($line-thickness * 0.5);

    font-weight: bold;
    line-height: calc(#{$circle-size} - #{$line-thickness * 2});
    color: $brand-color;
    text-align: center;

    background-color: $background-color;
    border-radius: 50%;
  }


  .loud-process-diagram__content::before {
    background: $gradient fixed;
    background-color: $brand-color;

    content: "";


    @include breakpoint(to tablet-large) {
      background-image: none;
    }
  }


  .loud-process-diagram__content::after {
    background-clip: padding-box;
    border: $line-thickness solid transparent;

    content: counter(process-diagram);
    counter-increment: process-diagram;
  }


  .loud-process-diagram__item:first-child .loud-process-diagram__content::before,
  .loud-process-diagram__item:first-child .loud-process-diagram__content::after {
    top: 0;
  }


  .loud-process-diagram__item:nth-child(odd) .loud-process-diagram__content::before,
  .loud-process-diagram__item:nth-child(odd) .loud-process-diagram__content::after {
    left: $circle-alignment-offset;
  }


  .loud-process-diagram__item:nth-child(even) .loud-process-diagram__content::before,
  .loud-process-diagram__item:nth-child(even) .loud-process-diagram__content::after {
    right: $circle-alignment-offset;
  }
}
