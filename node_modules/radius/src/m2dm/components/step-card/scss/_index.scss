/**
 * section: M2DM/components/step-card
 * title: Step card
 *
 * activateComponent: radius-component-step-card
 * jsModule: step-card
 * jsFunction: stepCard
 *
 * purpose: Use to break a long user flow into a sequence of logical steps.
 *
 * description: |
 *   The step card is a pattern built for forms with multiple consecutive parts but also has a static modifier to be used without its javascript counterpart.<br><br>
 *
 *   ### Modifier:
 *   `step-card--grey` - if there is only one card per page, then this modifier should be applied.
 *
 *   ### Elements:
 *     - `step-card`: The main element. This element has the option of two classes:
 *       - `is-collapsed`: which shows the `step-card__collapse` element and hides the `step-card__content`
 *       - `is-inactive`: which shows the `step-card__inactive` element and hides the `step-card__content`
 *     - `step-card__content`: The meat of the content. This element wraps the general content where other components will be placed.
 *     - `step-card__collapse`: Contains the summarised content.
 *     - `step-card__inactive`: Contains the inactive content.
 *
 * markup: components/step-card/example
 */

@mixin radius-component-step-card {
  $animation-duration: 0.4s;
  $fade-duration: 0.2s;
  $tick-icon: svg-icon("tick");

  .step-card {
    position: relative;

    max-width: 47rem;
    margin: 0 auto 1rem;
    overflow: hidden;

    background: get-color(white);

    box-shadow: 0 0 2px 0 rgba(get-color(black), 0.12),
      0 2px 2px 0 rgba(get-color(black), 0.24);

    transition: height $animation-duration;
  }


  .step-card--grey {
    background: get-color(grey, 3x-light);

    border: 1px solid get-color(grey, 2x-light);

    box-shadow: none;
  }


  .step-card.is-collapsed {
    background: get-color(grey, 4x-light);

    border: 1px solid get-color(grey, 2x-light);

    box-shadow: none;
  }


  .step-card.is-inactive {
    color: get-color(grey, light);

    pointer-events: none;

    border: 1px solid get-color(grey, 3x-light);

    box-shadow: none;
  }


  .step-card__content,
  .step-card__collapse,
  .step-card__inactive {
    @include golden-ratio-paddings(7, 1, 1);

    padding-top: 4rem;
    padding-bottom: 4rem;

    transition: opacity $fade-duration;
    will-change: opacity;


    @include breakpoint(from mobile-medium) {
      @include golden-ratio-paddings(6, 2, 2);
    }


    @include breakpoint(from mobile-large) {
      @include golden-ratio-paddings(6, 3, 3);
    }
  }


  .step-card__collapse,
  .step-card__inactive {
    padding-top: 2rem;
    padding-bottom: 2rem;
  }


  .step-card__collapse,
  .step-card.is-collapsed .step-card__content {
    opacity: 0;
  }


  .step-card.is-collapsed .step-card__collapse {
    opacity: 1;
  }


  .step-card__collapse,
  .step-card__inactive,
  .step-card.is-collapsed .step-card__content,
  .step-card.is-inactive .step-card__content {
    display: none;
  }


  .step-card.is-collapsed .step-card__collapse,
  .step-card.is-inactive .step-card__inactive {
    display: block;
  }


  .step-card__support-icon {
    @include get-single-column-width(1 7 1);

    position: absolute;
    top: 0;
    left: 0;

    height: 100%;
    padding-top: 2rem;


    &::after {
      display: block;
      width: 1.75rem;
      height: 100%;
      max-width: 100%;
      margin: 0 auto;

      background-image: url($tick-icon);
      background-position: center top;
      background-repeat: no-repeat;
      background-size: 100%;

      content: "";
    }


    @include breakpoint(to mobile-medium) {
      display: none;
    }


    @include breakpoint(from mobile-medium) {
      @include get-single-column-width(2 6 2);
    }


    @include breakpoint(from mobile-large) {
      @include get-single-column-width(3 6 3);
    }
  }
}
