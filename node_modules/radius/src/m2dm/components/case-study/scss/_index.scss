/**
 * section: M2DM/components/case-study
 * title: Case study
 *
 * activateComponent: radius-component-case-study
 *
 * abstractLink: cd87b942-cd43-4357-a1d8-86fdeb30a31c
 *
 * purpose: Display a case study of a customer in order to convey trust in Funding Circle through businesses' positive experiences.
 *
 * description: |
 *
 *   This component should include a large background image and some content in a box. The content box can include any other component. Typically, it may include a quote from a customer or information about their experiences with Funding Circle.
 *
 *   To specifiy the background image and the colour of the background and content box, you must use the `case-study-customisation` mixin.
 *
 *   ### Modifiers
 *
 *   There are 6 modifiers, but you must only use 3 at a time. You must choose one each for the X-axis, Y-axis, and sizing.
 *
 *   #### X-axis
 *
 *   `case-study--left` - make the content box sit on the left
 *
 *   `case-study--right` - make the content box sit on the right
 *
 *   #### Y-axis
 *
 *   `case-study--middle` - make the content box sit in the middle vertically
 *
 *   `case-study--bottom` - make the content box sit slightly below the image
 *
 *   #### Sizing
 *
 *   `case-study--small` - makes the component work in half width containers
 *
 *   `case-study--large` - makes the component work in full width containers
 *    <br />
 *    <br />
 *
 *   The parameters for `case-study-customisation` are:<br />
 *
 *   1) Path to the folder containing background images or empty string if you don't want to pass an image through this mixin (images within the
 *   folder should be named l.jpg and s.jpg)<br />
 *
 *   2) Background color of the content block<br />
 *
 *   3) Background color of the overflow (should be the same color as the
 *   content below it). Only required for `--bottom` variants.<br />
 *
 *   <br />
 *   <br />
 *
 *   ## Note
 *   If you're coming here because you recently upgraded to Radius 8.x.x and the case study in your project is now broken please look at the new
 *   markup for the case study component. In prior versions of Radius the background image was added to a `:before` pseudo element. In the 8.0.0
 *   release the Case Study no longer adds the background image to a pseudo element, but requires you add a div with  `.case-study__image" as the
 *   first child of the case-study component.
 *
 *   <br />
 *   <br />
 *
 * sassUsage: |
 *
 *   @include radius-component-case-study;
 *
 *   .case-study {
 *      @include case-study-customisation("img/case-study", #3D5A99, #FAEBD7);
 *   }
 *
 * markup: components/case-study/example
 *
 */

@import "mixins/case-study-customisation";


@mixin radius-component-case-study {
  $large-min-height-dt: 70vh;

  // Assumes that smaller case studies are half viewport width
  $small-min-height-dt: 35/64 * 50vw;

  $top-padding: 2rem;
  $bottom-padding: 2rem;

  $content-box-v-padding: 2rem;
  $content-box-side-padding: 1.5rem;
  $content-box-v-padding-small: 1rem;

  $variant-middle-mobile-v-inset: 2.5rem;
  $variant-middle-mobile-img-height: 12.5rem;

  $variant-bottom-v-offset: 2.5rem;
  $variant-bottom-mobile-v-inset: 7.5rem;
  $variant-bottom-mobile-img-height: 10rem;

  $variant-small-bottom-v-offset: 1.5rem;
  $variant-small-bottom-mobile-v-inset: 1.5rem;
  $variant-small-bottom-mobile-img-height: 12.5rem;

  $breakpoint-small: mobile-medium;
  $breakpoint-medium: tablet-medium;
  $breakpoint-large: desktop-x-large;


  .case-study {
    position: relative;

    display: flex;

    width: 100%;

    padding-top: $top-padding;
    padding-bottom: $bottom-padding;


    .case-study__image {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;

      display: block;

      width: 100%;

      background-position: center 15%;
      background-repeat: no-repeat;
      background-size: cover;

      content: "";
    }
  }


  .case-study__inner {
    flex-grow: 1;
  }


  .case-study__content {
    position: relative;

    padding-top: $content-box-v-padding;
    padding-right: $content-box-side-padding;
    padding-bottom: $content-box-v-padding;
    padding-left: $content-box-side-padding;
  }


  /*
   * --large
   */
  .case-study--large {
    @include from($breakpoint-small) {
      min-height: $large-min-height-dt;
    }

    @include to($breakpoint-small) {
      padding: 0;
    }
  }


  .case-study--large .case-study__inner {
    @include from-to($breakpoint-small, $breakpoint-large) {
      @include golden-ratio-paddings(7,1,1);
    }

    @include from($breakpoint-large) {
      @include golden-ratio-paddings(5,1,1);
    }
  }


  /*
   * .--small
   */
  .case-study--small {
    min-height: $small-min-height-dt;


    @include to($breakpoint-medium) {
      padding: 0;
    }
  }


  .case-study--small .case-study__inner {
    @include from-to($breakpoint-medium, $breakpoint-large) {
      @include golden-ratio-paddings(7,1,1);
    }

    @include from($breakpoint-large) {
      @include golden-ratio-paddings(5,1,1);
    }
  }


  .case-study--small .case-study__content {
    padding-top: $content-box-v-padding-small;
    padding-bottom: $content-box-v-padding-small;
  }


  /*
   * --middle
   */
  .case-study--middle {
    align-items: center;
  }


  /*
   * --middle.--large
   */
  .case-study--middle.case-study--large {
    @include to($breakpoint-small) {
      .case-study__image {
        height: $variant-middle-mobile-img-height;
      }
    }
  }


  .case-study--middle.case-study--large .case-study__content {
    @include to($breakpoint-small) {
      width: 100%;

      margin-top: $variant-middle-mobile-img-height - $variant-middle-mobile-v-inset;
    }
  }


  /*
   * --middle.--small
   */
  .case-study--middle.case-study--small {
    @include to($breakpoint-medium) {
      .case-study__image {
        height: $variant-middle-mobile-img-height;
      }
    }
  }


  .case-study--middle.case-study--small .case-study__content {
    @include to($breakpoint-medium) {
      width: 100%;

      margin-top: $variant-middle-mobile-img-height - $variant-middle-mobile-v-inset;
      margin-left: 0;
    }
  }


  /*
   * --left
   */
  .case-study--left .case-study__content {
    @include from($breakpoint-small) {
      @include golden-ratio-paddings(1,false,1);
    }

    @include from($breakpoint-medium) {
      @include golden-ratio-paddings(1,false,2);
    }
  }


  /*
   * --right
   */
  .case-study--right .case-study__content {
    @include from($breakpoint-small) {
      @include golden-ratio-paddings(1,1,false);
    }

    @include from($breakpoint-medium) {
      @include golden-ratio-paddings(1,2,false);
    }
  }


  /*
   * --bottom
   */
  .case-study--bottom {
    align-items: flex-end;
  }


  /*
   * --bottom.--left
   */
  .case-study--bottom.case-study--left .case-study__content {
    @include to($breakpoint-small) {
      @include golden-ratio-paddings(5,false,1);
    }
  }


  /*
   * --bottom.--right
   */
  .case-study--bottom.case-study--right .case-study__content {
    @include to($breakpoint-small) {
      @include golden-ratio-paddings(5,1,false);
    }
  }


  /*
   * --bottom.--large
   */
  .case-study--bottom.case-study--large {
    @include to($breakpoint-small) {
      .case-study__image {
        height: $variant-bottom-mobile-v-inset + $variant-bottom-mobile-img-height;
      }
    }

    @include from($breakpoint-small) {
      .case-study__image {
        height: calc(100% - #{$variant-bottom-v-offset});
      }
    }
  }


  .case-study--bottom.case-study--large .case-study__content {
    @include from($breakpoint-small) {
      bottom: ($bottom-padding * -1);
    }

    @include to($breakpoint-small) {
      min-height: $variant-bottom-mobile-v-inset;
      margin-top: $variant-bottom-mobile-img-height;
    }
  }


  /*
   * --bottom.--small
   */
  .case-study--small.case-study--bottom {

    @include to($breakpoint-medium) {
      .case-study__image {
        height: ($variant-small-bottom-mobile-v-inset + $variant-small-bottom-mobile-img-height);
      }
    }


    @include from($breakpoint-medium) {
      .case-study__image {
        height: calc(100% - #{$variant-small-bottom-v-offset});
      }
    }
  }


  .case-study--small.case-study--bottom .case-study__content {
    @include from($breakpoint-medium) {
      bottom: ($bottom-padding * -1);
    }

    @include to($breakpoint-medium) {
      min-height: $variant-small-bottom-mobile-v-inset;
      margin-top: $variant-small-bottom-mobile-img-height;
    }
  }


  /*
   * .--small.--left
   */
  .case-study--small.case-study--left .case-study__content {
    @include from($breakpoint-medium) {
      @include golden-ratio-paddings(2,false,1);
    }
  }


  /*
   * .--small.--right
   */
  .case-study--small.case-study--right .case-study__content {
    @include from($breakpoint-medium) {
      @include golden-ratio-paddings(2,1,false);
    }
  }


  /*
   * .--small.--bottom.--left
   */
  .case-study--small.case-study--bottom.case-study--left .case-study__content {
    @include to($breakpoint-medium) {
      @include golden-ratio-paddings(5,false,1);
    }
  }


  /*
   * .--small.--bottom.--right
   */
  .case-study--small.case-study--bottom.case-study--right .case-study__content {
    @include to($breakpoint-medium) {
      @include golden-ratio-paddings(5,1,false);
    }
  }
}
